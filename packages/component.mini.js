var Ue=Object.defineProperty;var qe=(n)=>{throw TypeError(n);};var We=(n,o,e)=>o in n?Ue(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e;var $e=(n,o,e)=>We(n,typeof o!="symbol"?o+"":o,e),_e=(n,o,e)=>o.has(n)||qe("Cannot "+e);var v=(n,o,e)=>(_e(n,o,"read from private field"),e?e.call(n):o.get(n)),U=(n,o,e)=>o.has(n)?qe("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(n):o.set(n,e),ae=(n,o,e,t)=>(_e(n,o,"write to private field"),t?t.call(n,e):o.set(n,e),e),K=(n,o,e)=>(_e(n,o,"access private method"),e);const Ie=(n)=>typeof n=="object"&&n!==null;function je(n,o,e,t){const r=n[o];if(Element.prototype.isPrototypeOf(e)||Element.prototype.isPrototypeOf(r))return void t(n,o,e,r);if(!Ie(r)||!Ie(e))return void(r!==e&&t(n,o,e&&typeof e=="object"?JSON.parse(JSON.stringify(e)):e,r));const s=Reflect.ownKeys(r),c=Reflect.ownKeys(e);s.forEach((m)=>{c.includes(m)?je(r,m,e[m],t):je(r,m,void 0,t)}),c.filter((m)=>!s.includes(m)).forEach((m)=>{t(r,m,e[m],void 0)})}function De(n,o=new Set()){if(typeof n!="object"||n===null||o.has(n))return n;o.add(n);for(const e in n)De(n[e],o);return n}const Ce=/^([1-9]\d*|0)$/,Se=[];function Ve(n,o){const{master:e,contextVars:t,fn:r,_options:s}=n,{getter:c,oldValue:m,immediate:y,absol:O}=s;n.targets=new Map(),Se.push(n);const k=c.call(e,t);return Se.pop(),(n.type!=="data"||k!==m||k!==null&&typeof k=="object")&&((o||y)&&r.call(n.master,k,m,n,o),s.oldValue=O&&k&&typeof k=="object"?JSON.parse(JSON.stringify(k)):k),k}function Be(n,o,e,t){return n.addEventListener(o,e,t),()=>{n.removeEventListener(o,e,t)}}const Ze=function(){const n=new Map();function o(t){const r=(t=Object.getPrototypeOf(t)).constructor;if(r===HTMLElement)return;const s=n.get(r);if(s)return s;{const c=[],m=o(t);m&&c.push(...m);const y=Object.entries(Object.getOwnPropertyDescriptors(t)).filter(([O,k])=>k.get&&k.set).map(([O])=>O);return c.push(y),n.set(r,Object.freeze(c)),c}}function e(t,r,s,c=[]){if(!s.prototype.isPrototypeOf(t))return;let m=o(r);m=[...c,...m.flat(1/0)],m=new Set(m),m.forEach((y)=>{const O=r[y];t[y]=O&&typeof O=="object"?JSON.parse(JSON.stringify(O)):O}),[...t.children].forEach((y,O)=>{e(y,r.children.item(O))})}return function(t,r,s){const c=Node.prototype.cloneNode.call(this,t);return e(c,this,r,s),c}}(),Ge=function(){function n(e){const t=e.replace(/('[^']*'|`[^`]*`)/gi,(r)=>"string");return e!==t?n(t):t}function o(e,t=[]){const r=e.replace(/\{[^}{]*\}/gi,(s)=>(s.slice(1,-1).split(",").map((c)=>c.split(/:|=/)).filter((c)=>c[1]!=="@-!-#-$-%").map((c)=>c[0].trim()).forEach((c)=>t.push(c)),"@-!-#-$-%"));return e!==r&&o(r,t),t}return(e)=>o(e=n(e))}(),Re=function(){const n=new WeakMap();return function(o){if(n.get(o))return;const e=Reflect.getPrototypeOf(o);return e!==HTMLElement&&Re(e),Reflect.ownKeys(o.prototype).forEach((t)=>{let r=!1,s=Reflect.getOwnPropertyDescriptor(o.prototype,t);if(s.get){const c=s.get.toString().match(R.getter);if(c){const m=c[1].replace(R.ann,"").trim();if(m==="")s.get=function(){return this._getProp(t)},r=!0;else if(R.cached.test(m)){const y=s.get;s.get=function(){return this[me]||(this[me]={}),this[me][t]||(this[me][t]=y.bind(this),this.addEffector(this[me][t],{fn:(O,k)=>{this._setProp(t,O)}},{immediate:!0})),this._getProp(t)},r=!0}}}if(s.set){const c=s.set.toString().match(R.setter);c&&c[2].replace(R.ann,"").trim()===""&&(s.set=function(m){return this._setProp(t,m)},r=!0)}r&&Reflect.defineProperty(o.prototype,t,s)}),n.set(o,!0),o}}(),R=Object.freeze({text:/\{\{(.+?)\}\}/gi,text_simple:/^\{\{([^}]+?)\}\}$/,css:/---((\w|\d|-)+)/gi,attr:/\$\{.+?\}/gi,value:/^(\w+(\["\w+?"\]|\['\w+?'\]|\[\d+?\])?(\.|$))*$/,for:/^\s*(.+?)\s+in\s+(.+)\s*$/,for_items:/^(\((.+)\)|([^(].*[^)]?))$/,for_list:/^(\((.+)\)|([^(].*[^)]?))$/,ann:/(\/\*(.|\r|\n)*?\*\/|\/\/.*)/gi,getter:/^.+\{((.|\n|\r)*?)\}\s*$/,setter:/^.+\((.+)\)\s*\{((.|\n|\r)*?)\}\s*$/,cached:/^\s*('|"|`)cached\1.*?\r/i,ternaryOperator:/(\?\.|[^?]+\?[^:]+:.+)/,if:/[^if]+if.+/}),xe=new Map();var fe,pe,ne,ce,de,ee,we,Oe,ke,ze;const ye=new(ze=class{constructor(){U(this,ee);U(this,fe,new WeakMap());U(this,pe,new Set());U(this,ne,[]);U(this,ce,[]);U(this,de,!1);$e(this,"argsMap",new WeakMap());$e(this,"setSize",0);$e(this,"isSmashUpdate",!1);$e(this,"forceUpate",!1)}nextTick(n){v(this,pe).add(n),v(this,ne).length===0&&v(this,ce).length===0&&K(this,ee,ke).call(this,[{}])}removeMonitor({target:n,key:o,args:e}){const t=this.argsMap.get(n);if(!t)return;let r;n.constructor===Array&&Ce.test(o)&&(o="length"),r=t[o],r&&(r.delete(e),this.setSize--),r.size===0&&delete t[o],Reflect.ownKeys(t).length===0&&this.argsMap.delete(n)}addMonitor(n,o,e={}){let t;const{deep:r,immediate:s,absol:c}=e;t=r?()=>De(n()):n,o._options={getter:t,oldValue:void 0,immediate:s,absol:c},Ve.call(o.master,o)}createProxy(n={}){const o=this;if(!v(this,fe).get(n)){const e=new Proxy(n,{get(t,r){var m;if(r==="_isProxy")return!0;if(r==="v"&&typeof t=="object"&&t!==null)return t;let s,c;return s=c=t[r],typeof s=="function"?HTMLElement.prototype.isPrototypeOf(t)?s.bind(t):s:(s==null||typeof s=="object"&&(s=s._isProxy?s:o.createProxy(s)),K(m=o,ee,we).call(m,t,r,c),s)},set(t,r,s){var y;const c=t[r],m=s&&s._isProxy?s.v:s;return t[r]=m,(o.forceUpate||c!==m||typeof c=="object"&&c===null)&&(o.isSmashUpdate?(o.isSmashUpdate=!1,je(t,r,m,(O,k,G,Q)=>{var te;O[k]=G,K(te=o,ee,Oe).call(te,O,k,G,Q)})):K(y=o,ee,Oe).call(y,t,r,m,c)),!0}});v(this,fe).set(n,e)}return v(this,fe).get(n)}},fe=new WeakMap(),pe=new WeakMap(),ne=new WeakMap(),ce=new WeakMap(),de=new WeakMap(),ee=new WeakSet(),we=function(n,o,e){const t=Se[Se.length-1];if(!t)return;let r=this.argsMap.get(n);r||this.argsMap.set(n,r={}),n.constructor===Array&&Ce.test(o)&&(o="length");let s=r[o];s||(s=r[o]=new Set()),s.add(t),this.setSize++;{const c=t.targets;let m=c.get(n);m||c.set(n,m=new Set()),m.add(o)}e&&e.constructor===Array&&K(this,ee,we).call(this,e,"length")},Oe=function(n,o,e,t){let r=[],s=this.argsMap.get(n);s&&(r=s[o],!r&&n.constructor===Array&&Ce.test(o)&&(r=s.length)),r&&K(this,ee,ke).call(this,r,{target:n,key:o,value:e,oldValue:t})},ke=function(n,o){n.forEach((e)=>{e.type==="data"?v(this,ce).includes(e)||v(this,ce).push(e):v(this,ne).includes(e)||v(this,ne).push(e)}),v(this,de)||(Promise.resolve().then(()=>{for(ae(this,de,!1);v(this,ce).length;){const t=v(this,ce).pop();Reflect.apply(Ve,null,[t,!0])}if(v(this,ne).length===0)return;const e=[...v(this,ne)];for(ae(this,ne,[]),e.sort((t,r)=>{var s,c;return r.unique.length-t.unique.length||((s=r.rule)==null?void 0:s.order)-((c=t.rule)==null?void 0:c.order)});e.length;){const t=e.pop();t.fn&&(t.unique.reduce((r,s,c)=>r.filter((m)=>m.master===t.master&&m.unique[c]===s),v(this,ne)).length>0||Reflect.apply(Ve,t.master,[t,!0]))}}).finally(()=>{v(this,de)||(v(this,pe).forEach((e)=>e()),v(this,pe).clear())}),ae(this,de,!0))},ze)(),Te={};function Y(n,o,e){throw Error(`${n}！错误来自组件“${o}”的模板${e.outerHTML}`)}const Qe=function(){const n=Object.freeze({common:Object.freeze({self:"if($event.target !== el) return",passive:"$event.passiveDefault()",prevent:"$event.preventDefault()",stop:"$event.stopPropagation()"}),inexact:Object.freeze({meta:"if(!$event.metaKey) return",alt:"if(!$event.altKey) return",ctrl:"if(!$event.ctrlKey) return",shift:"if(!$event.shiftKey) return"}),exact:Object.freeze([["meta","if($event.metaKey) return"],["alt","if($event.altKey) return"],["ctrl","if($event.ctrlKey) return"],["shift","if($event.shiftKey) return"]]),press:Object.freeze({inexact:Object.freeze({delete:"if(($event.code+'').toLowerCase() !== 'delete') return",tab:"if(($event.code+'').toLowerCase() !== 'tab') return",home:"if(($event.code+'').toLowerCase() !== 'home') return",end:"if(($event.code+'').toLowerCase() !== 'end') return",pageup:"if(($event.code+'').toLowerCase() !== 'pageup') return",pagedown:"if(($event.code+'').toLowerCase() !== 'pagedown') return",enter:"if(($event.code+'').toLowerCase() !== 'enter') return",esc:"if(($event.code+'').toLowerCase() !== 'esc') return",space:"if(($event.code+'').toLowerCase() !== 'space') return"}),exact:Object.freeze([["delete","if(($event.code+'').toLowerCase() === 'delete') return"],["tab","if(($event.code+'').toLowerCase() === 'tab') return"],["home","if(($event.code+'').toLowerCase() === 'home') return"],["end","if(($event.code+'').toLowerCase() === 'end') return"],["pageup","if(($event.code+'').toLowerCase() === 'pageup') return"],["pagedown","if(($event.code+'').toLowerCase() === 'pagedown') return"],["enter","if(($event.code+'').toLowerCase() === 'enter') return"],["esc","if(($event.code+'').toLowerCase() === 'esc') return"],["space","if(($event.code+'').toLowerCase() === 'space') return"]])})});return function({embellishs:o,eventName:e}){const t=o.includes("exact");let r;["keydown","keypress","keyup"].includes(e)?r=o.map((c)=>n.press.inexact[c]).filter((c)=>c):(r=o.map((c)=>n.inexact[c]).filter((c)=>c),t&&r.length&&(r=r.concat(n.exact.filter(([c])=>!o.includes(c)).map(([c,m])=>m))));const s=o.map((c)=>n.common[c]).filter((c)=>c);return r.concat(s)}}(),Xe=function(){const n="___addEventListener_updateModel";function o(e,t,r){let s=t.call(this,r);return s=s&&s.constructor===Array?[...s]:[],e.checked?s.push(e.value):s.includes(e.value)&&s.splice(s.indexOf(e.value),1),s}return function(e,t,r,s,c){let m;e[n]&&e[n]();const y=(e.type||e.nodeName).toLowerCase();e.constructor===HTMLInputElement&&y==="checkbox"?m=e.hasAttribute("value")?(O)=>{const k=o.call(this,e,r,c);s.call(this,k,c)}:(O)=>{s.call(this,e.checked,c)}:m=(O)=>{s.call(this,e.value,c)},t||(t=e.constructor===HTMLTextAreaElement||e.constructor===HTMLInputElement&&["hidden","number","password","range","tel","text","url"].includes(y)?"input":"change"),e[n]=Be(e,t,m)}}();function Me(n){if(n.constructor===Array)for(;n.length;)Me(n.pop());else n.remove()}const Le=function(n,o){const e=n[o],t=e.cloneNode(!0);return t[I]=e[I],t},I="@map",F=Object.freeze({createSignMap:function(n,o){const e={};return e.parent=o&&(o.constructor===WeakRef?o:new WeakRef(o)),n.querySelectorAll("[sign]").forEach((t)=>{const r=t.getAttribute("sign");e[r]=t}),n[I]=e,n},toCommentBySign(n,o){const e=o[n];if(e.constructor===Array)F.toCommentByNodes(e);else{const t=F._toComment({el:e,sign:n});o[n]=t}},toCommentByNodes(n){let o,e=n;for(;e.constructor===Array;)o=e,e=o[0];o.shift();const t=F._toComment({el:e});Me(n),n[0]=t},_toComment({el:n,sign:o="sign"}){if(n.constructor===Comment)return n;const e=document.createComment(o);return n.parentNode.replaceChild(e,n),n[I]&&(e[I]={parent:n[I].parent},delete n[I].parent,delete n[I]),e},toElementBySign(n,o,e,t){const r=n[o];if(r.constructor===Array)return F.toElementByNodes(r,e,t);{const s=F._toElement({tempData:e,templateSign:t,comment:r,map:n});return n[o]=s,s}},toElementByNodes(n,o,e){let t=n,r=t[0];for(;r.constructor===Array;)t=r,r=t[0];if(r.constructor!==Comment&&r.nodeName!=="JOINT"){const s=r;return s[I]||F.createSignMap(s),s}{const s=F._toElement({tempData:o,templateSign:e,comment:r});return t[0]=s,s}},_toElement({comment:n,tempData:o,templateSign:e,map:t}){var s;const r=Le(o.fragments,e);return n.parentNode.replaceChild(r,n),t=t||((s=n[I])==null?void 0:s.parent),delete n[I],F.createSignMap(r,t)},appendForItem(n,o,e,t){let r=n[o-1];for(;r.constructor===Array;)r=r[r.length-1];const s=Le(e.fragments,t);var c,m,y;return c=r.parentNode,m=s,(y=r).nextSibling?c.insertBefore(m,y.nextSibling):c.appendChild(m),n.push(s),F.createSignMap(s)}}),He=new WeakMap(),me=Symbol("getFnCacheSymbol"),be=Symbol("slots"),Ye=function(n){return n??""},et=function(n){if(n.constructor===Number){const o=[];for(let e=0;e<n;e++)o[e]=e+1;return o}return n.constructor===Object?Object.entries(n):n};var ve,he,Z,D,ge,Fe,Ke,re,Ee,Ae;const ue=class ue extends HTMLElement{constructor(e){var t;super();U(this,re);U(this,ve,!1);U(this,he,!1);U(this,Z);U(this,D,{obj:void 0,tree:[],refs:[]});if(Re(this.constructor),v(this,D).obj=He.get(this)||ye.createProxy(),He.set(this,v(this,D).obj),!xe.get(this.constructor)){const r=document.getElementById(e).content.cloneNode(!0);this.initTemplate(r),K(t=ue,ge,Fe).call(t,r,this.constructor)}}disconnectedCallback(){this.isConnected||(K(this,re,Ae).call(this,v(this,D).tree),v(this,D).tree=[],delete this[me],ae(this,he,!1),typeof this._clearMessageListener=="function"&&this._clearMessageListener())}connectedCallback(){var e;if(!v(this,ve)){ae(this,ve,!0),ae(this,Z,this.attachShadow({mode:"closed"}));const t=xe.get(this.constructor).template,r=t.cloneNode(!0);v(this,Z).appendChild(r),v(this,Z)[I]=t[I]}v(this,he)||(ae(this,he,!0),K(e=ue,ge,Ke).call(e,this.constructor)(this,v(this,Z)),this.firstConnectedCallback(v(this,Z)))}firstConnectedCallback(e){}initTemplate(e){}globalExecute({name:e,params:t}){let r;return this.dispatchEvent(new CustomEvent("globalExecute",{bubbles:!0,composed:!0,cancelable:!1,detail:{name:e,params:t,callback:(s)=>{r=s}}})),r}get rootData(){return this.globalExecute({name:"rootData"})}_getProp(e){return v(this,D).obj[e]}_setProp(e,t,r){return r&&(ye.isSmashUpdate=!0),v(this,D).obj[e]=t,!0}addEffector(e,t,r){return t.type||(t.type="data"),t.master||(t.master=this),ye.addMonitor(e,t,r),t.type!=="data"&&t.targets.size&&v(this,D).tree.push(t),r&&r.remove?()=>{K(this,re,Ae).call(this,[t]);const s=v(this,D).tree.indexOf(t);v(this,D).tree.splice(s,1)}:void 0}nextTick(e){ye.nextTick(e)}emitEvent(e,t,r=!0){this.dispatchEvent(new CustomEvent(e,{bubbles:r,detail:t}))}postMessage(e,t=void 0){return this.globalExecute({name:"post",params:{name:e,data:t,source:this}}),this}addMessageListener(e,t,r=void 0){return this.globalExecute({name:"listener",params:{name:e,fun:t,source:r,master:this}}),this}addMessageListener2(e,t,r=void 0){return this.globalExecute({name:"listener",params:{name:e,fun:t,source:r,master:this}}),()=>{this.globalExecute({name:"removeListener",params:{name:e,fun:t,source:r}})}}cloneNode(e,t=void 0){return Ze.call(this,e,ue,t)}};ve=new WeakMap(),he=new WeakMap(),Z=new WeakMap(),D=new WeakMap(),ge=new WeakSet(),Fe=function(e,t){if(xe.get(t))return;let r=1;const s=()=>"id"+ ++r;let c=1;const m=()=>"s"+ ++c,y=[],O={},k=function Q({parentEl:te,fragments:L,parentId:J,eachIds:X=[],indexMap:ie}){const z=te.constructor!==DocumentFragment&&te.nodeName.includes("-");let se=[],le=-1;return[...te.childNodes].forEach((f)=>{var w,V,T;if(f.constructor===Text)return void(f.data.replaceAll(``,"").trim()===""&&f.remove());if(f.constructor===HTMLBRElement)return;const d=f;let h,E,p=[],i=!1,g=J,x=0;const l=d.getAttribute("sign")||m(),a=d.attributes,N=a.getNamedItem(":if");if(N){const u=s(),$=[{sign:l,id:u,mode:N.name.slice(1),attr:N}];let C=d;for(;C=C.nextElementSibling,C;){let q=C.attributes.getNamedItem(":else-if")||C.attributes.getNamedItem(":else");if(!q)break;const B=m(),W=s();if(C.setAttribute("sign",B),C.setAttribute("else_id",W),$.push({sign:B,id:W,mode:q.name.slice(1),attr:q}),q.name===":else")break}const M=$.map(({sign:q,id:B,mode:W,attr:oe})=>Object.freeze({sign:q,id:B,mode:W,expr:oe.value}));Object.freeze(M),y.push({type:"if",id:u,pid:g,sign:l,sameSign:i,exprs:M}),a.removeNamedItem(N.name),i=!0,g=u,x=1,p.push("if")}const S=a.getNamedItem(":else")||a.getNamedItem(":else-if");if(S){h=d;const u=d.getAttribute("sign"),$=d.getAttribute("else_id");u&&$||Y("else-if绑定语法错误，必须先在上一个节点绑定if才能在当前节点绑定else-if或else！",t.name,d),i&&Y("else前面不能再出现if。",t.name,d),y.push({type:"elseif",id:$,pid:g,sign:u,sameSign:i}),a.removeNamedItem(S.name),a.removeNamedItem("else_id"),i=!0,g=$,L[u]=d}let P=0;[a.getNamedItem(":for"),a.getNamedItem(":forB")].filter((u)=>u).forEach((u)=>{P+=1;const $=u.value.match(R.for);let C;$||Y(`for绑定语法错误:for="${u.value}"。`,t.name,d);{const q=$[1].match(R.for_items),B=$[2].match(R.for_list);q&&B||Y(`for绑定语法错误:for="${u.value}"。`,t.name,d);const W=B[2]||B[3],oe=(q[2]||q[3]).split(",");oe.length>3&&Y(`for绑定语法错误:for="${u.value}"。`,t.name,d),C=Object.freeze({list:W,item:oe[0],index:oe[1],deep:oe[2]})}const M=s();y.push({type:"for",id:M,pid:g,layer:P,sign:l,sameSign:i,vars:C,temp:u.value}),a.removeNamedItem(u.name),se.push(M),i=!0,g=M,x=1,p.push("for")});const H=a.getNamedItem(":sub-for");if(H&&H.value){d.children.length>0&&Y(":sub-for节点不允许包含内容！",t.name,d);const u=H.value,$=X.pop();$||Y(":sub-each节点没有上层:for节点！",t.name,d);const C=s();y.push({type:"sub-for",id:C,pid:g,eachId:$,sign:l,sameSign:i,expr:u}),a.removeNamedItem(H.name),x=1}if(z&&d.constructor!==HTMLSlotElement){const u=a.getNamedItem(":slot"),$=a.getNamedItem(":slot-data");u&&!u.value.trim()&&Y(":slot-name的值不能为空！",t.name,d);const C=u!=null&&u.value?Object.freeze({expr:u.value}):((w=a.getNamedItem("slot"))==null?void 0:w.value)||"",M=$==null?void 0:$.value;u&&a.removeNamedItem(u.name),$&&a.removeNamedItem($.name);const q=!!M&&M.charAt(0)==="{";let B;q&&M.charAt(M.length-1)!=="}"&&Y(":slot-data的值解构语法错误！",t.name,d),q&&(B=Ge(M),B.length===0&&Y(":slot-data的值解构不能是空的！",t.name,d)),P+=1;const W=s();y.push({type:"slotTemplate",id:W,pid:g,layer:P,sign:l,sameSign:i,name:C,data:M,decoVarNames:B}),g=W,i=!0,x=1,L[l]=d}if(d.constructor===HTMLSlotElement){let u=!0;if(g){let M=g;for(;M;){const q=y.find((B)=>B.id===M);if(q.type==="for"){u=!1;break}M=q.id}}const $=((V=a.getNamedItem("name"))==null?void 0:V.value)||"",C=a.getNamedItem(":slot-data");if(!u||C&&C.value){const M=C==null?void 0:C.value,q=s();y.push({type:"slot",id:q,pid:g,sign:l,sameSign:i,single:u,name:$,data:M}),x=1}else y.push({type:"slot-static",name:$});C&&a.removeNamedItem(C.name),a.getNamedItem(":name")&&a.removeNamedItem(":name")}const A=a.getNamedItem(":ref");if(A){const u=s();y.push({type:"ref",id:u,pid:g,sign:l,sameSign:i,expr:A.value}),a.removeNamedItem(A.name),x=1}let b=[...a].filter((u)=>u.name.charAt(0)===":");const _=b.find((u)=>u.name.indexOf(":model")===0);if(b=b.filter((u)=>u.name.indexOf(":model")!==0),_&&b.push(_),b.forEach((u)=>{var oe;if(u.value.trim()==="")return;let $,C;u.name.indexOf(":model")!==0||R.value.test(u.value)||Y(":model只能绑定属性名称，不支持复杂运算！",t.name,d),u.name.indexOf(":model.")===0?($="model",C=u.name.slice(7)):($=u.name.slice(1),C=void 0);let M,q=(oe=u.value.match(R.attr))==null?void 0:oe.map((Ne)=>Ne.slice(2,-1));q?M=u.value.replaceAll("\\","\\\\"):(M=u.value,q=[u.value]);const B=$.indexOf("-")>0?((Ne)=>Ne.replace(/-(\w)/g,(tt,Je)=>Je.toUpperCase()))($):void 0,W={type:"attr",id:s(),pid:g,sign:l,sameSign:i,name:$,humpName:B,eventName:C,expr:q[0],temp:M};d.constructor===HTMLSelectElement&&$==="model"?E=W:y.push(W),a.removeNamedItem(u.name),x=1}),[...a].filter((u)=>u.name.charAt(0)==="@").forEach((u)=>{const $=u.name.slice(1),C=[u.value];C[0].match(/^(\w+|\w+(\.\w+)+)$/)&&(C[0]=`${C[0]}($event)`);const M=s();y.push({type:"event",id:M,pid:g,sign:l,sameSign:i,name:$,expr:C[0]}),a.removeNamedItem(u.name),x=1}),d.children.length===0&&d.textContent.trim()!==""){if(HTMLStyleElement.prototype.isPrototypeOf(d)){const u=d.textContent.trim().replace(R.ann,"");if(u.match(R.css)){let $=u.replace(R.css,(M,q)=>`\${handles.getValueVsEmpty(${q=q.replaceAll("-",".")})}`);$=`\`${$}\``;const C=s();y.push({type:"css",id:C,pid:g,sign:l,sameSign:i,temp:$}),x=1}}else if((T=d.textContent.match(R.text))==null?void 0:T.map(($)=>$.slice(2,-2))){let $;R.text_simple.test(d.textContent)?$=d.textContent.slice(2,-2):($=d.textContent.replaceAll("\\","\\\\").replace(R.text,"${handles.getValueVsEmpty($1)}"),$=`\`${$}\``);const C=s();y.push({type:"text",id:C,pid:g,sign:l,sameSign:i,temp:$}),x=1}}let j;if(h||le++,x>0&&(d.setAttribute("sign",l),ie.map[l]=Object.freeze([...ie.indexs,le])),p.length>0||h?(j={map:{},indexs:[]},d[I]=j.map):j={map:ie.map,indexs:[...ie.indexs,le]},se=X.concat(se),Q({parentEl:d,fragments:L,parentId:g,eachIds:se,indexMap:j}),E&&y.push(E),h&&h.remove(),p.length>0){L[l]=d;const u=document.createElement("joint");u.setAttribute("sign",l),u.setAttribute("class",p.join(" ")),d.parentNode.replaceChild(u,d)}}),L}({parentEl:e,fragments:{},indexMap:{map:O,indexs:[]}});for(let Q in k)Object.freeze(k[Q][I]);e[I]=Object.freeze(O),y.forEach((Q,te)=>{Q.order=te+1,Object.freeze(Q)});const G={};xe.set(t,G),G.bindRules=Object.freeze(y),G.fragments=Object.freeze(k),G.template=e},Ke=function(e){const t=xe.get(e);if(t.bindExecute)return t.bindExecute;const r=t.bindRules,s=((L,J)=>{const X=function(f,d,h,E){const{scope:p,unique:i,rule:g,next:x,contextVars:l,isSubEach:a,forArgs:N}=h,{sign:S,layer:P,vars:H}=g;let A,b,_;if(K(this,re,Ee).call(this,{unique:i,includeSelf:!1}),P>1)A=N.nodes,b=N.indexs,_=b.reduce((j,w)=>{const V=j[w];return V.constructor!==Array&&(j[w]=[V]),j[w]},A);else{if(E)A=N.nodes;else{const j=g.sameSign?p[I].parent.deref():p[I];A=j[S],A.constructor!==Array&&(j[S]=A=[A]),h.forArgs={nodes:A},delete h.scope}b=[],_=A}{const j=f.length;for(let w=_.length;w>j;w--)w>1||a?Me(_.pop()):F.toCommentByNodes(_)}f.map((j,w)=>{let V;if(w===0)V=F.toElementByNodes(_,L,S);else if(V=_[w],V)for(;V.constructor===Array;)V=V[0];else V=F.appendForItem(_,w,L,S);const T=[...i,w.toString()],u={nodes:A,indexs:[...b,w]};return()=>{let $;h.type!=="for-slotTemplate"?($={...l},$[H.item]=j,H.index&&($[H.index]=w)):$=l,x.call(this,$,V,T,u,j,h)}}).forEach((j)=>j())},ie=function(f,d,h,E){const{scope:p,contextVars:i,forArgs:g,rule:x,next:l}=f;if(!ue.prototype.isPrototypeOf(d))return el.setAttribute("slot",h),void l.call(this,i,p,E,g);const a=d._getProp(be)[h];a!=null?this.addEffector(()=>a.items,{type:"for-slotTemplate",fn:X,scope:p,unique:E,forArgs:g,contextVars:i,preArgs:{args:f,slot:a,slotName:h,parentEl:d},rule:x,next:se},{immediate:!0}):l.call(this,i,p,E,g)},z=function(f,d,h,E){const{unique:p,preArgs:i,parentEl:g}=h;K(this,re,Ee).call(this,{unique:p,includeSelf:!1});const x=[...p,"html"];ie.call(this,i,g,f,x)},se=function(f,d,h,E,{getData:p,contextVars:i,unique:g},x){const l=d,{preArgs:{args:a,slot:N,slotName:S,parentEl:P}}=x,{rule:H,next:A}=a;N.single?(l.setAttribute("slot",S),l.removeAttribute("origin-slot")):(l.setAttribute("slot",g.join("-")),l.setAttribute("origin-slot",S));const b=p?p.call(P,i):void 0;if(H.decoVarNames)this.addEffector(()=>b,{type:"slotTemplateData",unique:[...h,"data"],scope:l,contextVars:f,forArgs:E,preArgs:a,forArgs:E,fn:le},{immediate:!0,deep:!0});else{let _=f;H.data&&(_={...f},_[H.data]=b),A.call(this,_,l,h,E)}},le=function(f,d,h){const{unique:E,contextVars:p,forArgs:i,scope:g,preArgs:x}=h,{next:l,setDecoVarToContext:a}=x,N={...p};a(N,f),l.call(this,N,g,E,i)};return Object.freeze({rules:J,initSlots:function(){if((J=J.filter((d)=>d.type==="slot"||d.type==="slot-static")).length===0)return;const f={};J.forEach(({type:d,name:h,single:E})=>{f[h]=d==="slot-static"?null:{single:E,items:[]}}),this._setProp(be,f)},forHandle:X,subForHandle:function(f,d,h,E,p,i,g,x){const l=h[I];let a=E.sameSign?h:l[E.sign];if(!a||a.constructor===Comment)return;let N=a.children[0];N||(N=Le(L.fragments,p.sign),a.appendChild(N),F.createSignMap(N),l[p.sign]=N);const{deep:S}=p.vars;S&&(f={...f,[S]:f[S]+1}),this.addEffector(d,{type:"for-eachSub",fn:X,scope:p.sameSign?N:h,unique:i,rule:p,forArgs:g,contextVars:f,next:x,isSubEach:!0},{immediate:!0})},ifHandle:function(f,d,h,E){const{scope:p,unique:i,rule:g,next:x,contextVars:l,forArgs:a}=h;K(this,re,Ee).call(this,{unique:i,includeSelf:!1});const N=g.sign,S=g.sameSign?p:p[I];if(f!==-1){const P=g.exprs[f].sign,H=F.toElementBySign(S,N,L,P);x.call(this,l,H,i,a,f)}else F.toCommentBySign(N,S)},slotTemplateHandle:function(f){const{scope:d,unique:h,rule:E,contextVars:p,getDynamicName:i}=f,{sign:g,sameSign:x,name:l}=E,a=(x?d:d[I][g]).parentElement;l.constructor===Object?this.addEffector(i,{type:"slotTemplate-name",unique:[...h,"name"],parentEl:a,contextVars:p,preArgs:f,fn:z},{immediate:!0}):ie.call(this,f,a,l,h)},slotHandle:function({scope:f,unique:d,rule:h,contextVars:E,getData:p}){const{name:i,sign:g,single:x,sameSign:l}=h,a=l?f:f[I][g];x||(a.setAttribute("name",d.join("-")),a.setAttribute("origin-name",i)),this._getProp(be)[i].items.push({unique:d,getData:p,contextVars:E})},propertyHandle:function(f,d,h,E){const{scope:p,rule:i}=h,g=i.sameSign?p:p[I][i.sign];if(function(x,l,a){const{type:N,name:S,humpName:P,expr:H}=x,A=a??"";if(N==="css")l.textContent=a;else if(N==="attr")if(S==="model")if(l.constructor===HTMLInputElement){const b=l.type.toLowerCase();if(b==="checkbox"){if(typeof a!="boolean"&&(!a||a.constructor!==Array))throw Error(`checkbox的:model绑定属性必须是数组或boolean类型。当前是${a?a.constructor:typeof a}类型，表达式：${H}`);a.constructor===Array?a.includes(l.value)?(l.setAttribute("checked",""),l.checked=!0):(l.removeAttribute("checked"),l.checked=!1):a?(l.setAttribute("checked",""),l.checked=!0):(l.removeAttribute("checked"),l.checked=!1)}else b==="radio"?l.value==a?(l.setAttribute("checked",""),l.checked=!0):(l.removeAttribute("checked"),l.checked=!1):l.value=A}else l.value=A;else if(S==="class"&&a&&a.constructor===Object){const b=Object.entries(a).filter((_)=>_[1]).map((_)=>_[0]);l.setAttribute(S,b.join(" "))}else if(S==="style"&&a&&a.constructor===Object){const b=Object.entries(a).map(([_,j])=>(/[A-Z]/.test(_)&&(_=_.replace(/([A-Z])/g,(w)=>`-${w.toLowerCase()}`)),`${_}:${j}`));l.setAttribute(S,b.join(";"))}else if(l.nodeName.includes("-")&&(S in l||P in l))l[P||S]=a;else if(a===!1||a==null)l.removeAttribute(S);else{const b=typeof A=="object"?JSON.stringify(A):A;l.setAttribute(S,b)}else N==="text"&&(l.textContent=A)}(i,g,f),!E&&i.name==="model"){const{getValue:x,setValue:l,contextVars:a}=h;Xe.call(this,g,i.eventName,x,l,a)}},eventHandle:function(f,d,h,E){const{name:p,sign:i,sameSign:g}=d,x=g?f:f[I][i];(function(l){let a=Te[l];if(a)return a;const N=l.split("."),S=N.shift(),P=N.includes("capture");let H;if(N.length){const b=Qe({embellishs:N,eventName:S});H=Function("el,$event,fn,listener,contextVars",`${b.join(`;`)};${N.includes("once")?`el.removeEventListener('${S}',fn,${P});`:""};listener.call(this,$event,contextVars)`)}else H=function(b,_,j,w,V){w.call(this,_,V)};const A=`_removeEventListener_${l}`;return a=function(b,_,j){b[A]&&b[A]();const w=(V)=>{H.call(this,b,V,w,_,j)};b[A]=Be(b,S,w,P)},Te[l]=a,a})(p).call(this,x,h,E)},refHandle:function(f,d,h){const E=d.sameSign?f:f[I][d.sign],p=`$${d.expr}`,i=v(this,Z)[p];i?i.constructor===Array?i.push(E):v(this,Z)[p]=[i,E]:v(this,Z)[p]=E,v(this,D).refs.push({unique:h,key:p})},errorHandle:function(f){if(f.message.includes(" is not defined")){const d=`“${e.name}”的模板绑定错误：${f.message}`;alert(d)}throw f;},toListFor:et,getValueVsEmpty:Ye})})(t,r),c=r.map((L,J)=>["elseif","slot-static"].includes(L.type)?void 0:`const rule_${L.id}=handles.rules[${J}];`).filter((L)=>L),m=new Set(),y=[],O=function L({id:J,pid:X,preSign:ie="",codeBlocks:z,contextVars:se}){const le=J?r.filter((h)=>h.id===J):r.filter((h)=>h.pid===X),f=`{${[...se].join(",")}}`;return le.map((h)=>{const E=new Set([...se]),{type:p,id:i,sign:g,name:x,vars:l,temp:a,expr:N,exprs:S,data:P}=h,H=h.layer===1?"forArgs = undefined;":"";if(p==="event"){const A={name:`eventHandle_${i}`,code:`function($event,${f},reset){${N}}`};return z.push(A),`handles.eventHandle.call(this,scope,rule_${i},eventHandle_${i},contextVars);`}if(p==="ref")return`handles.refHandle.call(this,scope,rule_${i},unique);`;if(["attr","text","css"].includes(p)){const A={name:`getValue_${i}`,code:`function(${f}){return ${a}}`};if(z.push(A),x==="model"){const b={name:`setValue_${i}`,code:`function(value,${f}){return ${N}=value}`};z.push(b)}return`this.addEffector(getValue_${i},{type:'prop',scope,unique:[...unique,'${i}'],rule:rule_${i},contextVars,${x==="model"?`getValue:getValue_${i},`:""}${x==="model"?`setValue:setValue_${i},`:""}fn:handles.propertyHandle},{immediate:true});`}if(p==="for"){const{list:A,item:b,index:_,deep:j}=l;E.add(b),_&&E.add(_),j&&E.add(j);const w={name:`getter_${i}`,code:`function(${f}){return handles.toListFor(${A})}`};z.push(w);const V=L({pid:i,preSign:g,codeBlocks:z,contextVars:E}),T={name:`next_${i}`,code:`function(contextVars,scope,unique,forArgs){${V}}`};return z.push(T),`${H}${j?`contextVars={...contextVars,${j}:0};`:""}this.addEffector(getter_${i},{type:'for',fn:handles.forHandle,contextVars,scope,unique:[...unique,'${i}'],forArgs,rule:rule_${i},next:${T.name}},{immediate:true});`}if(p==="sub-for"){const A={name:`getChildren_${i}`,code:`function(${f}){return handles.toListFor(${N})}`};z.push(A);const b=h.eachId;return`handles.subForHandle.call(this,contextVars,getChildren_${i},scope,rule_${i},rule_${b},[...unique,'${i}'],forArgs,next_${b});`}if(p==="if"){const A=S.map(({expr:V,mode:T},u)=>T==="if"?`if(${V}){return 0}`:T==="else-if"?`else if(${V}){return ${u}}`:T==="else"?`else{return ${u}}`:void 0).concat(["return -1"]).join(``),b={name:`getter_${i}`,code:`function(${f}){${A}}`};z.push(b);const _=S.map(({sign:V,id:T})=>L({pid:T,preSign:V,codeBlocks:z,contextVars:E})),j=_.map((V,T)=>({name:`sub_${i}_${T}`,code:`function(contextVars,scope,unique,forArgs){${V}}`}));j.forEach((V)=>z.push(V));const w={name:`next_${i}`,code:`function(contextVars,scope,unique,forArgs,ifIndex){({${j.map((V,T)=>`${T}:sub_${i}_${T}`).join(",")}})[ifIndex].call(this,contextVars,scope,unique,forArgs)}`};return z.push(w),`this.addEffector(getter_${i},{type:'if',fn:handles.ifHandle,contextVars,forArgs,scope,unique:[...unique,'${i}'],rule:rule_${i},next:${w.name}},{immediate:true});`}if(p==="slotTemplate"){const A={name:`getDynamicName_${i}`,code:`function(${f}){return ${x.expr}}`};z.push(A);const{decoVarNames:b}=h,_=``;b?b.forEach((T)=>E.add(T)):E.add(P);const j=L({pid:i,preSign:g,codeBlocks:z,contextVars:E}),w={name:`next_${i}`,code:`function(contextVars,scope,unique,forArgs){${_}${j}}`};z.push(w);let V="undefined";if(b){V=`setDecoVarToContext_${i}`;const T={name:V,code:`(contextVars,data)=>{const ${P}=data;${b.map((u)=>`contextVars['${u}']=${u}`).join(`\r;`)}}`};z.push(T)}return`${_}${H}handles.slotTemplateHandle.call(this,{scope,unique:[...unique,'st@${i}'],forArgs,contextVars,rule:rule_${i},getDynamicName:getDynamicName_${i},setDecoVarToContext:${V},next:${w.name}});`}if(p==="slot"){const A={name:`getData_${i}`,code:`function(${f}){return ${P}}`};return z.push(A),`handles.slotHandle.call(this,{scope,unique:[...unique,'st@${i}'],rule:rule_${i},contextVars,getData:getData_${i}});`}}).filter((h)=>h).join(``)}({codeBlocks:y,contextVars:m}),k={name:"entry",code:`function(contextVars,scope,unique){handles.initSlots.call(this);let forArgs=undefined;${O}}`};m.clear(),y.push(k);const G=y.map((L)=>`const ${L.name}=${L.code}`).join(`\r;`),Q=Function("handles",`${c.join(``)}${G};return entry`),te=Q(s);return t.bindExecute=function(L,J){const X=F.createSignMap(J);L.map=X,te.call(L,{},X,[])},t.updateTreeFunction=Q,t.bindExecute},re=new WeakSet(),Ee=function({unique:e,includeSelf:t=!0}){{const r=this._getProp(be);r&&Object.entries(r).filter((s)=>s[1]).forEach(([s,c])=>{const m=e.reduce((y,O,k)=>y.filter((G)=>G.unique[k]===O),c.items);m.length>0&&(c.items=c.items.filter((y)=>!m.find((O)=>O===y)))})}e.length,e.reduce((r,s,c)=>r.filter((m)=>m.unique[c]===s),v(this,D).refs).forEach((r)=>{delete v(this,Z)[r.key],v(this,D).refs.splice(v(this,D).refs.indexOf(r),1)});{let r=e.reduce((s,c,m)=>s.filter((y)=>y.unique[m]===c),v(this,D).tree);if(!t){const s=e.length;r=r.filter((c)=>c.unique.length>s)}if(r.length===0)return;K(this,re,Ae).call(this,r),v(this,D).tree=v(this,D).tree.filter((s)=>s.fn)}},Ae=function(e){e.forEach((t)=>{t.targets.forEach((r,s)=>{r.forEach((c)=>{ye.removeMonitor({target:s,key:c,args:t})}),r.clear()}),t.targets&&t.targets.clear();for(let r in t)delete t[r]})},U(ue,ge);let Pe=ue;export{Pe as Component,He as componentReactObjMap,ye as effector};